<html>
  <head>
    <title>Field Selection for Bachelors by Pakistani Students (2003-2023)</title>
    <script src="https://cdn.anychart.com/releases/8.9.0/js/anychart-base.min.js" type="text/javascript"></script>
    <style type="text/css">
      html,
      body,
      #container {
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>  
    <div id="container"></div>
    <script>
      anychart.onDocumentReady(function () {
  
        // create a bar chart
        var chart = anychart.bar();

        // data representing students selecting different fields over the last 20 years
        var fieldData = [
          [35, 25, 20, 15, 5, "2023"],
          [33, 26, 21, 14, 6, "2022"],
          [31, 27, 22, 14, 6, "2021"],
          [29, 28, 22, 15, 6, "2020"],
          [28, 29, 21, 16, 6, "2019"],
          [26, 30, 22, 16, 6, "2018"],
          [24, 31, 23, 17, 5, "2017"],
          [23, 32, 22, 18, 5, "2016"],
          [22, 33, 23, 17, 5, "2015"],
          [20, 35, 22, 18, 5, "2014"],
          [19, 36, 22, 18, 5, "2013"],
          [18, 37, 23, 17, 5, "2012"],
          [17, 38, 24, 16, 5, "2011"],
          [16, 38, 25, 16, 5, "2010"],
          [15, 39, 25, 16, 5, "2009"],
          [14, 40, 26, 15, 5, "2008"],
          [13, 41, 26, 15, 5, "2007"],
          [12, 42, 27, 14, 5, "2006"],
          [11, 42, 28, 14, 5, "2005"],
          [10, 43, 28, 14, 5, "2004"]
        ];

        // configure a function to create series
        var createSeries = function (columnNumber, name) {
          var data = [];
          for (var i = 0; i < fieldData.length; i++) {
            var value = fieldData[i][columnNumber];
            data.push({
              x: fieldData[i][5],
              value: value
            });
          }
      
          var series = chart.bar(data);
          series.name(name).stroke("3 #fff 1").selectionMode("none");
        };

        // create series for each field
        createSeries(0, "Science");
        createSeries(1, "Engineering");
        createSeries(2, "Business");
        createSeries(3, "Arts");
        createSeries(4, "Other");

        // set the chart title
        chart
          .title()
          .enabled(true)
          .text("Field Selection for Bachelors by Pakistani Students (2003-2023)");

        // enable the chart legend
        chart
          .legend()
          .enabled(true);
    
        // create a stacked bar chart from the multi-series bar chart
        chart.yScale().stackMode("percent");
    
        // customize the settings of the axes
        chart
          .xAxis()
          .ticks(false);
        chart
          .xAxis()
          .title()
          .enabled(true)
          .text("Years")
          .padding([0, 0, 10, 0]);
        chart
          .xAxis()
          .labels()
          .fontSize(11)
          .fontColor("#474747")
          .padding([0, 10, 0, 0]);
        chart
          .yAxis(0)
          .labels()
          .format(function () {
            return Math.abs(this.value) + "%";
          });

        // customize the tooltip
        chart
          .tooltip()
          .useHtml(true)
          .fontSize(12)
          .titleFormat(function () {
            return this.getData("x") + " " + this.seriesName;
          })
          .format(function () {
            return (
              "<h6 style='font-size:12px; font-weight:400; margin: 0.25rem 0;'>Students: " +
              "<b>" +
              this.getData("value") +
              "%</b></h6>"
            );
          });
    
        // set a custom color palette
        chart.palette(
          anychart.palettes.distinctColors().items(["#1F77B4", "#FF7F0E", "#2CA02C", "#D62728", "#9467BD"])
        );

        // set a container id for the chart
        chart.container("container");
    
        // initiate chart drawing
        chart.draw();

      });
    </script>
  </body>
</html>
